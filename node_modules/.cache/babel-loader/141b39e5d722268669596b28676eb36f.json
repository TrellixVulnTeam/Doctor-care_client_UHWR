{"ast":null,"code":"var _jsxFileName = \"/home/asus2/Frontend-React.JS-QuickStart/src/containers/System/UserManage.js\";\nimport React, { Component } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { connect } from 'react-redux';\nimport './UserManage.scss';\nimport { getAllUsers, createNewUserService, deleteUserService, editUserService } from '../../services/userService';\nimport ModalUser from './ModalUser';\nimport ModalUserDel from './ModalUserDel';\nimport ModalUserEdit from './ModalUserEdit';\nimport { emitter } from '../../utils/emitter';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass UserManage extends Component {\n  //khoi tao state(bien) dung voi class\n  constructor(props) {\n    super(props);\n\n    this.handleAddNewUser = () => {\n      this.setState({\n        isOpenModalUser: true\n      });\n    };\n\n    this.toggleUserModal = () => {\n      this.setState({\n        isOpenModalUser: !this.state.isOpenModalUser\n      });\n    };\n\n    this.handledelUser = user => {\n      this.setState({\n        isOpenModalUserDel: true,\n        valueuser: user\n      });\n    };\n\n    this.toggleDeleteUserModal = () => {\n      this.setState({\n        isOpenModalUserDel: !this.state.isOpenModalUserDel\n      });\n    };\n\n    this.toggleEditUserModal = () => {\n      this.setState({\n        isOpenModalUserEdit: !this.state.isOpenModalUserEdit\n      });\n    };\n\n    this.handleEditUser = user => {\n      console.log(user);\n      this.setState({\n        isOpenModalUserEdit: true,\n        valueuser: user\n      });\n    };\n\n    this.createNewUser = async data => {\n      try {\n        let response = await createNewUserService(data);\n\n        if (response && response.errCode !== 0) {\n          alert(response.errMessage);\n        } else {\n          await this.getAllUsersFromReact(); //sau khi them xong se tu tat modal\n\n          this.setState({\n            isOpenModalUser: false\n          });\n          emitter.emit('EVENT_CLEAR_MODAL_DATA');\n        }\n      } catch (e) {\n        console.log(e);\n      }\n\n      console.log('check data', data);\n    };\n\n    this.EditUser = async data => {\n      console.log('data', data);\n\n      try {\n        let response = await editUserService(data);\n\n        if (response && response.errCode !== 0) {\n          alert(response.errMessage);\n        } else {\n          console.log(response);\n          await this.getAllUsersFromReact();\n          this.setState({\n            isOpenModalUserEdit: false\n          });\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    this.getAllUsersFromReact = async () => {\n      let response = await getAllUsers('ALL');\n\n      if (response && response.errCode === 0) {\n        //yeu cau render lai\n        this.setState({\n          arrUsers: response.user\n        });\n      }\n    };\n\n    this.handleDeleteUser = async () => {\n      let a = this.state.valueuser;\n      console.log('delete user', a);\n\n      try {\n        let res = await deleteUserService(a.id);\n\n        if (res && res.errCode === 0) {\n          await this.getAllUsersFromReact();\n          this.setState({\n            isOpenModalUserDel: false\n          });\n        } else {\n          alert(res.errMessage);\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    this.state = {\n      arrUsers: [],\n      isOpenModalUser: false,\n      isOpenModalUserDel: false,\n      isOpenModalUserEdit: false,\n      valueuser: {}\n    };\n  }\n\n  async componentDidMount() {\n    /** life cycle (vong doi)\r\n     * run component\r\n     * 1.run constructor -> state\r\n     * 2.did mount (set state) (set gia tri cua cac bien truoc khi render)(goi api lay gia tri va setstate cho component-> state luu lai gia tri cua cac bien)\r\n     * set <-> born , die <-> unmount\r\n     * 3.render\r\n     * \r\n    */\n    await this.getAllUsersFromReact();\n  }\n\n  render() {\n    let arrUsers = this.state.arrUsers;\n    console.log('render', this.state.arrUsers);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user-container\",\n      children: [/*#__PURE__*/_jsxDEV(ModalUser, {\n        isOpenModalUser: this.state.isOpenModalUser,\n        toggleFromParent: this.toggleUserModal,\n        createNewUser: this.createNewUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ModalUserDel, {\n        toggleFromParent1: this.toggleDeleteUserModal,\n        isOpenModalUserDel: this.state.isOpenModalUserDel,\n        handleDeleteUser: this.handleDeleteUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }, this), this.state.isOpenModalUserEdit && /*#__PURE__*/_jsxDEV(ModalUserEdit, {\n        toggleFromParentEdit: this.toggleEditUserModal,\n        isOpenModalUserEdit: this.state.isOpenModalUserEdit,\n        EditUser: this.EditUser,\n        lastData: this.state.valueuser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"title\",\n        children: \"Manage user with mh\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mx-1\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary px-3\",\n          onClick: () => this.handleAddNewUser(),\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-plus\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 25\n          }, this), \"Add new user\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"users-table mt-3 mx-1\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          id: \"customers\",\n          children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"First name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Last name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Address\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Action\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 21\n          }, this), arrUsers && arrUsers.map((item, index) => {\n            console.log('check', item, index);\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.firstName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.lastName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.address\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-edit\",\n                  onClick: () => this.handleEditUser(item),\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    class: \"fas fa-pencil-alt\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 194,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-delete\",\n                  onClick: () => this.handledelUser(item),\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    class: \"fa fa-trash-alt\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 198,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 33\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {};\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserManage);","map":{"version":3,"sources":["/home/asus2/Frontend-React.JS-QuickStart/src/containers/System/UserManage.js"],"names":["React","Component","FormattedMessage","connect","getAllUsers","createNewUserService","deleteUserService","editUserService","ModalUser","ModalUserDel","ModalUserEdit","emitter","UserManage","constructor","props","handleAddNewUser","setState","isOpenModalUser","toggleUserModal","state","handledelUser","user","isOpenModalUserDel","valueuser","toggleDeleteUserModal","toggleEditUserModal","isOpenModalUserEdit","handleEditUser","console","log","createNewUser","data","response","errCode","alert","errMessage","getAllUsersFromReact","emit","e","EditUser","arrUsers","handleDeleteUser","a","res","id","componentDidMount","render","map","item","index","email","firstName","lastName","address","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport { connect } from 'react-redux';\r\nimport './UserManage.scss';\r\nimport {getAllUsers, createNewUserService, deleteUserService, editUserService} from '../../services/userService'\r\nimport ModalUser from './ModalUser';\r\nimport ModalUserDel from './ModalUserDel';\r\nimport ModalUserEdit from './ModalUserEdit';\r\nimport {emitter} from '../../utils/emitter';\r\nclass UserManage extends Component {\r\n    //khoi tao state(bien) dung voi class\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            arrUsers: [],\r\n            isOpenModalUser:false,\r\n            isOpenModalUserDel:false,\r\n            isOpenModalUserEdit: false,\r\n            valueuser:{}\r\n        }\r\n    }\r\n\r\n    handleAddNewUser = () => {\r\n        this.setState({\r\n            isOpenModalUser:true,\r\n        })\r\n    }\r\n    toggleUserModal = () => {\r\n        this.setState({\r\n            isOpenModalUser: !this.state.isOpenModalUser,\r\n        })\r\n    }\r\n\r\n    handledelUser = (user) => {\r\n        this.setState({\r\n            isOpenModalUserDel:true,\r\n            valueuser:user\r\n        })\r\n    }\r\n    toggleDeleteUserModal = () => {\r\n        this.setState({\r\n            isOpenModalUserDel: !this.state.isOpenModalUserDel,\r\n        })\r\n    }\r\n\r\n    toggleEditUserModal = () => {\r\n        this.setState({\r\n            isOpenModalUserEdit: !this.state.isOpenModalUserEdit,\r\n        })\r\n    }\r\n\r\n    handleEditUser = (user) => {\r\n        console.log(user)\r\n        this.setState({\r\n            isOpenModalUserEdit: true,\r\n            valueuser:user\r\n        })\r\n    }\r\n\r\n    createNewUser = async(data) => {\r\n        try {\r\n            let response = await createNewUserService(data)\r\n            if(response && response.errCode !==0) {\r\n                alert(response.errMessage)\r\n            }else {\r\n                await this.getAllUsersFromReact();\r\n                //sau khi them xong se tu tat modal\r\n                this.setState({\r\n                    isOpenModalUser: false,\r\n                })\r\n                emitter.emit('EVENT_CLEAR_MODAL_DATA')\r\n            }\r\n        }catch (e) {\r\n            console.log(e)\r\n        }\r\n        \r\n        console.log('check data',data)\r\n    }\r\n\r\n    EditUser = async(data) => {\r\n        console.log('data',data)\r\n        try{\r\n            let response = await editUserService(data)\r\n            if(response && response.errCode !==0) {\r\n                alert(response.errMessage)\r\n            }else {\r\n                console.log(response)\r\n                await this.getAllUsersFromReact();\r\n                this.setState({\r\n                    isOpenModalUserEdit: false\r\n                })\r\n            }\r\n        }catch(e){\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        /** life cycle (vong doi)\r\n         * run component\r\n         * 1.run constructor -> state\r\n         * 2.did mount (set state) (set gia tri cua cac bien truoc khi render)(goi api lay gia tri va setstate cho component-> state luu lai gia tri cua cac bien)\r\n         * set <-> born , die <-> unmount\r\n         * 3.render\r\n         * \r\n        */\r\n        \r\n        await this.getAllUsersFromReact();\r\n    }\r\n    getAllUsersFromReact = async() => {\r\n        let response = await getAllUsers('ALL');\r\n        if(response && response.errCode === 0){\r\n            //yeu cau render lai\r\n            this.setState({\r\n                arrUsers: response.user\r\n            })\r\n        }\r\n    }\r\n    handleDeleteUser = async() => {\r\n        let a = this.state.valueuser;\r\n        console.log('delete user', a)\r\n        try{\r\n            let res = await deleteUserService(a.id);\r\n            if(res && res.errCode === 0){\r\n                await this.getAllUsersFromReact();\r\n                this.setState({\r\n                    isOpenModalUserDel: false,})\r\n            }else{\r\n                alert(res.errMessage)\r\n            }\r\n        }catch(e){\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        \r\n        let arrUsers = this.state.arrUsers;\r\n        console.log('render', this.state.arrUsers )\r\n        return (\r\n            <div className=\"user-container\">\r\n                \r\n                <ModalUser \r\n                    isOpenModalUser={ this.state.isOpenModalUser }\r\n                    toggleFromParent={this.toggleUserModal}\r\n                    createNewUser = {this.createNewUser}\r\n                    \r\n                />\r\n                <ModalUserDel\r\n                    toggleFromParent1={this.toggleDeleteUserModal}\r\n                    isOpenModalUserDel={this.state.isOpenModalUserDel}\r\n                    handleDeleteUser={this.handleDeleteUser}\r\n                />\r\n                {\r\n                    this.state.isOpenModalUserEdit &&\r\n                    <ModalUserEdit\r\n                    toggleFromParentEdit={this.toggleEditUserModal}\r\n                    isOpenModalUserEdit={this.state.isOpenModalUserEdit}\r\n                    EditUser={this.EditUser}\r\n                    lastData = {this.state.valueuser}   \r\n                    />\r\n                }\r\n                \r\n                <div className=\"title\">\r\n                    Manage user with mh\r\n                </div>\r\n                <div className=\"mx-1\">\r\n                    {/* px 1- 5  p(pading) x(truc ox)*/}\r\n                    <button className=\"btn btn-primary px-3\" onClick = {() => this.handleAddNewUser()}>\r\n                        <i className=\"fas fa-plus\"></i>Add new user</button>\r\n                </div>\r\n                <div className=\"users-table mt-3 mx-1\">\r\n                <table id=\"customers\">\r\n                    <tr>\r\n                        <th>Email</th>\r\n                        <th>First name</th>\r\n                        <th>Last name</th>\r\n                        <th>Address</th>\r\n                        <th>Action</th>\r\n                    </tr>\r\n                                                        \r\n                        {arrUsers && arrUsers.map((item, index) => {\r\n                            console.log('check', item, index)\r\n                            return(\r\n                                <tr>\r\n                                    <td>{item.email}</td>\r\n                                    <td>{item.firstName}</td>\r\n                                    <td>{item.lastName}</td>\r\n                                    <td>{item.address}</td>\r\n                                    <td>\r\n                                        <button className=\"btn-edit\"\r\n                                        onClick={() => this.handleEditUser(item)}>\r\n                                        <i class=\"fas fa-pencil-alt\"></i>\r\n                                        </button>\r\n                                        <button className=\"btn-delete\"\r\n                                        onClick={() => this.handledelUser(item)}>\r\n                                        <i class=\"fa fa-trash-alt\"></i>\r\n                                        </button>\r\n                                    </td>\r\n                                </tr>\r\n                            )\r\n                        })\r\n                        }                       \r\n                                      \r\n                </table>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserManage);\r\n"]},"metadata":{},"sourceType":"module"}